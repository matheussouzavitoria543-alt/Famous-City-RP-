<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Progresso em Foco</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <style>
    body {
      background-color: #f9fafb;
      font-family: 'Inter', sans-serif;
    }

    /* Animação suave */
    .fade-in {
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Estilo do modal da mensagem global */
    .global-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border-radius: 1rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
      z-index: 9999;
      width: 90%;
      max-width: 420px;
      padding: 1.5rem;
      display: none;
    }

    .global-message.show {
      display: block;
    }

    .close-btn {
      position: absolute;
      top: 8px;
      right: 12px;
      background: none;
      border: none;
      font-size: 1.3rem;
      cursor: pointer;
      color: #333;
    }

    .close-btn:hover {
      color: #e11d48;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Barra superior -->
  <nav class="bg-blue-600 text-white py-3 px-4 flex justify-between items-center shadow-md">
    <h1 class="text-lg font-bold">Progresso em Foco</h1>
    <button onclick="toggleAdmin()" class="hover:text-gray-200">
      <i data-feather="settings"></i>
    </button>
  </nav>

  <!-- Conteúdo -->
  <main class="flex-1 flex items-center justify-center bg-red-500">
    <div class="bg-white rounded-xl shadow-md p-4 w-11/12 max-w-lg text-center">
      <h2 class="text-xl font-semibold mb-3">Leaderboard</h2>
      <p class="text-gray-500">Sistema de progresso em desenvolvimento...</p>
    </div>
  </main>

  <!-- Painel admin -->
  <div id="adminPanel" class="hidden fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
    <div class="bg-white p-6 rounded-lg shadow-lg w-11/12 max-w-md fade-in relative">
      <button onclick="toggleAdmin()" class="absolute right-3 top-3 text-gray-600 hover:text-red-600">
        <i data-feather="x"></i>
      </button>
      <h2 class="text-lg font-bold mb-4 text-gray-700">Painel da Administração</h2>

      <textarea id="globalMessageInput" rows="3" class="w-full border rounded-md p-2 mb-4" placeholder="Digite a mensagem global..."></textarea>

      <button onclick="enviarMensagemGlobal()" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition">
        Enviar Mensagem Global
      </button>
    </div>
  </div>

  <!-- Mensagem Global -->
  <div id="globalMessage" class="global-message fade-in">
    <button class="close-btn" onclick="fecharMensagem()">×</button>
    <h2 class="text-lg font-bold mb-2 text-red-600">Mensagem da Moderação</h2>
    <p id="globalMessageText" class="text-gray-700"></p>
  </div>

  <script>
    feather.replace();

    function toggleAdmin() {
      const adminPanel = document.getElementById('adminPanel');
      adminPanel.classList.toggle('hidden');
    }

    function enviarMensagemGlobal() {
      const mensagem = document.getElementById('globalMessageInput').value.trim();
      if (!mensagem) return alert('Digite uma mensagem antes de enviar.');

      localStorage.setItem('mensagemGlobal', mensagem);
      localStorage.removeItem('mensagemLida'); // Permite que os membros vejam a nova mensagem

      alert('Mensagem global enviada com sucesso!');
      document.getElementById('adminPanel').classList.add('hidden');
      mostrarMensagemGlobal();
    }

    function mostrarMensagemGlobal() {
      const mensagem = localStorage.getItem('mensagemGlobal');
      const mensagemLida = localStorage.getItem('mensagemLida');
      const msgBox = document.getElementById('globalMessage');
      const msgText = document.getElementById('globalMessageText');

      if (mensagem && !mensagemLida) {
        msgText.textContent = mensagem;
        msgBox.classList.add('show');
      }
    }

    function fecharMensagem() {
      const msgBox = document.getElementById('globalMessage');
      msgBox.classList.remove('show');
      localStorage.setItem('mensagemLida', 'true');
    }

    document.addEventListener('DOMContentLoaded', mostrarMensagemGlobal);
  </script>
</body>
</html>
